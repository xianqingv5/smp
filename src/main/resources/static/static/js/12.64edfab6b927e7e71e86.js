webpackJsonp([12],{"6ldH":function(e,t,n){var a=n("li7T");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("qePi")("a838bab2",a,!0)},IGoR:function(e,t,n){"use strict";function a(e,t){i(e);var n=t.value;if("function"==typeof n){var a=!1;setTimeout(function(){a=!0},0),e[o]=function(t){if(a&&!e.contains(t.target))return n(t)},document.documentElement.addEventListener("click",e[o],!1)}}function i(e){document.documentElement.removeEventListener("click",e[o],!1),delete e[o]}var l=n("E7jK");l="default"in l?l.default:l;/^2\./.test(l.version)||l.util.warn("VueClickaway 2.1.0 only supports Vue 2.x, and does not support Vue "+l.version);var o="_vue_clickaway_handler",s={bind:a,update:function(e,t){t.value!==t.oldValue&&a(e,t)},unbind:i},p={directives:{onClickaway:s}};t.version="2.1.0",t.directive=s,t.mixin=p},Qk0u:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("yt7g"),i=n("IGoR"),l=(0,a.getStore)("token");t.default={mixins:[i.mixin],data:function(){return{inspectForm:{applyType:"",channelInfoName:"",channelInfoValue:"",sampleDemandName:"",sampleDemandValue:"",dataReferName:"",dataReferValue:"",enclosureName:"",enclosure:""},inspectRules:{applyType:[{required:!0,message:"请选择申请类型",trigger:"change"}],channelInfoName:[{required:!0,message:"请选择渠道信息",trigger:"change"}],channelInfoValue:[{required:!0,message:"请填写渠道信息的值",trigger:"blur"}],sampleDemandName:[{required:!0,message:"请选择样本需求",trigger:"change"}],sampleDemandValue:[{required:!0,message:"请填写样本需求的值",trigger:"blur"}],dataReferName:[{required:!0,message:"请选择数据参考",trigger:"change"}],dataReferValue:[{required:!0,message:"请填写数据参考的值",trigger:"blur"}]},applyTypeData:null,channelData:null,sampleData:null,referData:null,isSubmit:!1,isCannel:!1,isShowUpFormFiles:!1,fileList:[],isShowQuestion:!1,desData:[{title:"【数据附加表】",text:"上传excel表格，该渠道最近2周的分日线索量及线索用户数;"},{title:"【需求附加表】",text:"如抽样数据需求较多，可上传列表;"},{title:"【话术附加表】",text:"如需指定外呼话术可上传;"}],channelList:null,sampleList:null,referList:null,isSelectInput0:!0,isInput0:!1,isInputDefault:!1,isInput1:!0,upLoadUrl:"http://smp.bitauto.com/upload/uncheatAttachment",upLoadData:null,formName:""}},computed:{role:function(){return(0,a.getStore)("role")},isNoPower:function(){return 5!=this.role&&6!=this.role},isUpFileEnclosurPower:function(){return 5==this.role}},created:function(){this.initApplyData()},methods:{initApplyData:function(){var e=this;(0,a.ajaxPost)("/intelligent/inspectApplyInitData").then(function(t){var t="string"==typeof t?JSON.parse(t):t,n=t.data,a=n.code,i=(n.msg,n.result);0==a&&(e.applyTypeData=i.data.applyType,e.channelData=i.data.channelInfo,e.sampleData=i.data.sampleDemand,e.referData=i.data.dataRefer)}).catch(function(e){console.log("err",e)})},handleChannelChoose:function(e){for(var t=0;t<this.channelData.length;t++)this.channelData[t].name==e&&(0!=this.channelData[t].children.length?(this.isSelectInput0=!0,this.isInput0=!1,this.channelList=this.channelData[t].children):(this.isSelectInput0=!1,this.isInput0=!0,this.inspectForm.channelInfoValue=""))},handleSampleChoose:function(e){"外呼数量"==e?(this.isInput1=!0,this.isInputDefault=!1,this.inspectForm.sampleDemandValue=""):(this.isInput1=!1,this.isInputDefault=!0,this.inspectForm.sampleDemandValue="随机抽取")},handleShowUpBox:function(){this.isShowUpFormFiles=!this.isShowUpFormFiles},submitUpload:function(){this.upLoadData={token:l};var e=this;setTimeout(function(){e.$refs.upload.submit()},500)},handleUpLoadSuccess:function(e,t,n){this.inspectForm.enclosure=e.result.path,this.inspectForm.enclosureName=e.result.filename,console.log(e,t,n),this.isShowUpFormFiles=!this.isShowUpFormFiles},hancleCannelUpLoad:function(){this.isShowUpFormFiles=!1},handelSubmitForm:function(e){var t=this;this.formName=e,this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.isSubmit=!0})},submitApply:function(){var e=this;(0,a.ajaxPost)("/intelligent/submitInspectForm",this.inspectForm).then(function(t){var t="string"==typeof t?JSON.parse(t):t,n=t.data,a=n.code;n.msg,n.result;0==a&&(e.isSubmit=!1,e.clearFormData())}).catch(function(e){console.log("err",e)})},CannelApply:function(){this.isSubmit=!1},handleCannel:function(e){this.formName=e,this.isCannel=!0},confirmCannel:function(){this.isCannel=!1,this.clearFormData()},cannelSubmit:function(){this.isCannel=!1},handleLookQuestion:function(){this.isShowQuestion=!this.isShowQuestion},handleCloseClick:function(){this.isShowQuestion=!this.isShowQuestion},clearFormData:function(){var e=this.formName;this.$refs[e].resetFields(),this.inspectForm.channelInfoValue="",this.inspectForm.sampleDemandValue="",this.inspectForm.dataReferValue=""}}}},Snpu:function(e,t,n){n("6ldH");var a=n("mEwh")(n("Qk0u"),n("jvA8"),null,null);e.exports=a.exports},jvA8:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mod-inspectApply"},[n("h5",{staticClass:"mod-title"},[e._v("抽样检查申请")]),e._v(" "),n("div",{staticClass:"inspectApplyForm"},[n("h5",{staticClass:"formTitle"},[e._v("填写申请单")]),e._v(" "),n("el-form",{ref:"inspectForm",staticClass:"demo-ruleForm",attrs:{model:e.inspectForm,rules:e.inspectRules,"label-width":"100px"}},[n("span",{staticClass:"tips"},[e._v("所有带"),n("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("为必填项")]),e._v(" "),n("el-form-item",{attrs:{label:"申请类型",prop:"applyType"}},[n("el-col",{attrs:{span:8}},[n("el-select",{attrs:{placeholder:"请选择",disabled:e.isNoPower},model:{value:e.inspectForm.applyType,callback:function(t){e.$set(e.inspectForm,"applyType",t)},expression:"inspectForm.applyType"}},e._l(e.applyTypeData,function(t,a){return null!=e.applyTypeData&&0!=e.applyTypeData.length?n("el-option",{key:a,attrs:{label:t.name,value:t.name}}):e._e()}))],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"渠道信息",prop:"channelInfoName"}},[n("el-col",{attrs:{span:8}},[n("el-select",{attrs:{placeholder:"请选择",disabled:e.isNoPower},on:{change:function(t){e.handleChannelChoose(e.inspectForm.channelInfoName)}},model:{value:e.inspectForm.channelInfoName,callback:function(t){e.$set(e.inspectForm,"channelInfoName",t)},expression:"inspectForm.channelInfoName"}},e._l(e.channelData,function(t,a){return null!=e.channelData&&0!=e.channelData.length?n("el-option",{key:a,attrs:{label:t.name,value:t.name}}):e._e()}))],1),e._v(" "),n("el-col",{attrs:{span:8}},[e.isSelectInput0?n("el-select",{staticClass:"channelInfo",attrs:{placeholder:"请选择",disabled:e.isNoPower},model:{value:e.inspectForm.channelInfoValue,callback:function(t){e.$set(e.inspectForm,"channelInfoValue",t)},expression:"inspectForm.channelInfoValue"}},e._l(e.channelList,function(t,a){return null!=e.channelList&&0!=e.channelList.length?n("el-option",{key:a,attrs:{label:t.name,value:t.name}}):e._e()})):e._e(),e._v(" "),e.isInput0?n("el-input",{attrs:{type:"text",placeholder:"请填写",disabled:e.isNoPower},model:{value:e.inspectForm.channelInfoValue,callback:function(t){e.$set(e.inspectForm,"channelInfoValue",t)},expression:"inspectForm.channelInfoValue"}}):e._e()],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"样本需求",prop:"sampleDemandName"}},[n("el-col",{attrs:{span:8}},[n("el-select",{attrs:{placeholder:"请选择",disabled:e.isNoPower},on:{change:function(t){e.handleSampleChoose(e.inspectForm.sampleDemandName)}},model:{value:e.inspectForm.sampleDemandName,callback:function(t){e.$set(e.inspectForm,"sampleDemandName",t)},expression:"inspectForm.sampleDemandName"}},e._l(e.sampleData,function(t,a){return null!=e.sampleData&&0!=e.sampleData.length?n("el-option",{key:a,attrs:{label:t.name,value:t.name}}):e._e()}))],1),e._v(" "),n("el-col",{attrs:{span:8}},[e.isInputDefault?n("el-input",{attrs:{type:"text",placeholder:"随机抽取",disabled:e.isNoPower},model:{value:e.inspectForm.sampleDemandValue,callback:function(t){e.$set(e.inspectForm,"sampleDemandValue",t)},expression:"inspectForm.sampleDemandValue"}}):e._e(),e._v(" "),e.isInput1?n("el-input",{attrs:{type:"text",placeholder:"请填写",disabled:e.isNoPower},model:{value:e.inspectForm.sampleDemandValue,callback:function(t){e.$set(e.inspectForm,"sampleDemandValue",t)},expression:"inspectForm.sampleDemandValue"}}):e._e()],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"数据参考",prop:"dataReferName"}},[n("el-col",{attrs:{span:8}},[n("el-select",{attrs:{placeholder:"请选择",disabled:e.isNoPower},model:{value:e.inspectForm.dataReferName,callback:function(t){e.$set(e.inspectForm,"dataReferName",t)},expression:"inspectForm.dataReferName"}},e._l(e.referData,function(t,a){return null!=e.referData&&0!=e.referData.length?n("el-option",{key:a,attrs:{label:t.name,value:t.name}}):e._e()}))],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-input",{attrs:{type:"text",placeholder:"请填写",disabled:e.isNoPower},model:{value:e.inspectForm.dataReferValue,callback:function(t){e.$set(e.inspectForm,"dataReferValue",t)},expression:"inspectForm.dataReferValue"}})],1)],1),e._v(" "),e.isUpFileEnclosurPower?n("el-form-item",{staticClass:"mod-upload",attrs:{label:"附件"}},[n("el-col",{attrs:{span:8}},[n("el-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:e.inspectForm.enclosure,callback:function(t){e.$set(e.inspectForm,"enclosure",t)},expression:"inspectForm.enclosure"}}),e._v(" "),n("el-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:e.inspectForm.enclosureName,callback:function(t){e.$set(e.inspectForm,"enclosureName",t)},expression:"inspectForm.enclosureName"}}),e._v(" "),n("div",{staticClass:"upButton",attrs:{disabled:e.isNoPower},on:{click:e.handleShowUpBox}},[e._v("上传附件")]),e._v(" "),n("span",{staticClass:"question",on:{click:e.handleLookQuestion}},[n("i",{staticClass:"el-icon-question"})]),e._v(" "),e.isShowUpFormFiles?n("div",{staticClass:"upApplyForFiles"},[n("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:e.upLoadUrl,data:e.upLoadData,"file-list":e.fileList,"on-success":e.handleUpLoadSuccess,"show-file-list":!0,"auto-upload":!1}},[n("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",disabled:e.isNoPower},slot:"trigger"},[e._v("请选择文件")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",disabled:e.isNoPower},on:{click:e.submitUpload}},[e._v("确定上传")]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请上传附件")]),e._v(" "),n("div",{staticClass:"cannel",on:{click:e.hancleCannelUpLoad}},[e._v("取消")])],1)],1):e._e()],1)],1):e._e(),e._v(" "),n("el-form-item",[n("el-col",{staticClass:"btnBox",attrs:{span:24}},[n("el-form-item",[n("el-button",{staticClass:"cannelBtn",attrs:{disabled:e.isNoPower},on:{click:function(t){e.handleCannel("inspectForm")}}},[e._v("取消")]),e._v(" "),n("el-button",{staticClass:"submitBtn",attrs:{type:"primary",disabled:e.isNoPower},on:{click:function(t){e.handelSubmitForm("inspectForm")}}},[e._v("提交")])],1)],1)],1)],1)],1),e._v(" "),e.isSubmit?n("div",{staticClass:"confirm"},[n("h5",[e._v("是否确认提交申请")]),e._v(" "),n("div",{staticClass:"confirmBtn"},[n("span",{on:{click:e.submitApply}},[e._v("确认")]),e._v(" "),n("span",{on:{click:e.CannelApply}},[e._v("取消")])])]):e._e(),e._v(" "),e.isCannel?n("div",{staticClass:"confirm"},[n("h5",[e._v("是否确认撤销申请")]),e._v(" "),n("div",{staticClass:"confirmBtn"},[n("span",{on:{click:e.confirmCannel}},[e._v(" 确认")]),e._v(" "),n("span",{on:{click:e.cannelSubmit}},[e._v("取消")])])]):e._e(),e._v(" "),e.isShowQuestion?n("div",{staticClass:"description"},[n("ul",{staticClass:"des-content"},e._l(e.desData,function(t,a){return n("li",{key:a},[n("h5",{staticClass:"desTitle"},[e._v(e._s(t.title))]),e._v(" "),n("p",{staticClass:"desText"},[e._v(e._s(t.text))])])})),e._v(" "),n("div",{staticClass:"sureBtn",on:{click:e.handleCloseClick}},[e._v("确认")])]):e._e()])},staticRenderFns:[]}},li7T:function(e,t,n){t=e.exports=n("BkJT")(!1),t.push([e.i,".mod-title{height:36px;line-height:36px;padding:0 20px;border-radius:5px;text-align:left;font-size:14px;background:#5477ad;color:#fff}.mod-inspectApply{background:#f9f9f9;min-height:750px;position:relative}.mod-inspectApply .inspectApplyForm{width:95%;margin:20px auto}.mod-inspectApply .inspectApplyForm .tips{font-size:14px;float:right;margin-right:32px}.mod-inspectApply .formTitle{height:56px;line-height:56px;font-size:28px;font-weight:500;margin-bottom:26px;border-bottom:1px dashed #ccc}.mod-inspectApply .el-form{width:80%;margin:0 auto}.mod-inspectApply .channelInfo{width:265px}.mod-inspectApply .el-form-item__label{font-size:16px}.mod-inspectApply .el-button:hover{border:1px solid #5477ad;color:#fff;background-color:#5477ad}.mod-inspectApply .el-button--primary{border-color:#5477ad!important}.mod-inspectApply .btnBox{margin-top:24px;text-align:left}.mod-inspectApply .btnBox .el-form-item__content{margin-left:36px!important}.mod-inspectApply .btnBox .el-button{padding:14px 44px;font-size:15px}.mod-inspectApply .btnBox .submitBtn{background:#5477ad;color:#fff}.mod-inspectApply .btnBox .el-button:focus{color:#fff;border-color:#f9f9f9;background-color:#757272}.mod-inspectApply .btnBox button{margin-right:50px}.mod-inspectApply .confirm{width:280px;padding:23px 10px;position:absolute;top:40%;left:50%;margin-left:-150px;z-index:10001;border:1px solid #ccc;border-radius:5px;background:#fff;box-shadow:0 0 5px #ccc}.mod-inspectApply .confirm h5{height:44px;line-height:44px;text-align:center;font-size:16px;color:#333;margin-bottom:10px}.mod-inspectApply .confirm .confirmBtn span{display:inline-block;width:60px;height:24px;line-height:24px;border:1px solid #737475;border-radius:5px;font-size:14px;margin:0 10px;cursor:pointer}.mod-inspectApply .confirm .confirmBtn span:hover{background:#5477ad;color:#fff}.mod-inspectApply .mod-upload{text-align:left}.mod-inspectApply .mod-upload .upButton{display:inline-block;width:100px;height:40px;margin-left:36px;text-align:center;border-radius:5px;background:#d6d6d6;color:snow;cursor:pointer}.mod-inspectApply .mod-upload .el-upload__tip{height:28px}.mod-inspectApply .mod-upload .question{display:inline-block;width:30px;margin-left:5px;font-size:26px;color:#bfbfbf;cursor:pointer}.mod-inspectApply .mod-upload .question:hover{color:#333}.mod-inspectApply .description{width:420px;height:180px;position:fixed;top:50%;left:50%;margin-left:-164px;margin-top:-90px;font-size:13px;text-align:left;padding:20px;z-index:10000;border:1px solid #ccc;border-radius:10px;box-shadow:5px 3px 5px #ccc;background:#f9f9f9}.mod-inspectApply .description li{line-height:22px;margin-bottom:10px}.mod-inspectApply .description .desText{padding-left:34px}.mod-inspectApply .description .sureBtn{float:right;width:60px;height:30px;border-radius:5px;line-height:30px;text-align:center;background:#5477ad;color:#fff;cursor:pointer}.mod-inspectApply .description .sureBtn:hover{background:#528dff}.mod-inspectApply .upApplyForFiles{width:300px;height:150px;position:fixed;top:50%;left:50%;margin-left:-50px;margin-top:-75px;background:#fff;z-index:10000;box-shadow:0 0 5px #ccc}.mod-inspectApply .upApplyForFiles .upload{width:100%;height:100%;padding:20px;text-align:left;box-sizing:border-box}.mod-inspectApply .upApplyForFiles .cannel{position:absolute;bottom:10px;right:16px;width:40px;height:18px;text-align:center;border-radius:3px;line-height:18px;background:#5477ad;color:#fff;font-size:10px;cursor:pointer}.mod-inspectApply .upApplyForFiles .el-button--primary{border-color:#5477ad;background:#5477ad}.mod-inspectApply .upApplyForFiles .el-button--success{background:#d7d7d7;border-color:#d7d7d7!important}.mod-inspectApply .upApplyForFiles .el-button--success:hover{border-color:#5477ad;background:#5477ad}.mod-inspectApply .upApplyForFiles .el-form-item__conten{line-height:36px}.mod-inspectApply .upApplyForFiles .el-upload__tip,.mod-inspectApply .upApplyForFiles .el-upload__tip .el-upload-list__item,.mod-inspectApply .upApplyForFiles .el-upload__tip .el-upload-list__item:first-child{margin-top:0}",""])}});